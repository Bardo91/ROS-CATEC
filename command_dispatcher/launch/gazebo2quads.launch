<?xml version="1.0"?>
<launch>
	<!-- Include gazebo launch file -->
	<param name="/use_sim_time" value="true" />
	<node name="gazebo" pkg="gazebo" type="gazebo" args="$(find command_dispatcher)/world/testbed_2.world" respawn="false" output="screen">
	   <env name="GAZEBO_RESOURCE_PATH" value="$(find uav)/models" />
	</node>
	
	<node name="gazebo_gui" pkg="gazebo" type="gui" />

	<!-- Here it is configured which quadrotors are going to be used -->
    <arg name="uav_8/flying" value="1" />
	<arg name="uav_3/flying" value="1" />

	<!-- maximum velocity and acceleration for each quadrotor -->
	<param name="uav_8/amax" value="16" type="double" />
	<param name="uav_8/vmax" value="2" type="double" />
	<param name="uav_8/anglemax" value="90" type="double" />
	<param name="uav_8/transition_time" value="15.0" type="double" />

	<param name="uav_3/amax" value="16" type="double" />
	<param name="uav_3/vmax" value="2" type="double" />
	<param name="uav_3/anglemax" value="90" type="double" />
	<param name="uav_3/transition_time" value="15.0" type="double" />
	
	<!-- The configuration parameters are given their values -->
	<param name="uav_8/flying" value="$(arg uav_8/flying)" type="bool" />
	<param name="uav_3/flying" value="$(arg uav_3/flying)" type="bool" />
	
	<!-- Nodes will start if their /uav_i/flying parameter is true  -->
	<node name="uav_8" pkg="uav" type="uav_gazebo" args="8 1" if="$(arg uav_8/flying)">
	     <remap from="uav_8/control_references_rw" to="/path_follower_8/control_references_rw" />	
	</node>
	
	<!-- Path Follower Node. -->
	<node name="simple_follower8" pkg="path_follower" type="simple_follower" args="8 1.0">
	     <remap from="/path_follower_8/way_point_callback" to="/prueba_test/out_waypoint_8" />	
	</node>


	<node name="uav_3" pkg="uav" type="uav_gazebo" args="3 1" if="$(arg uav_3/flying)">
	     <remap from="uav_3/control_references_rw" to="/path_follower_3/control_references_rw" />	
	</node>
	
	<!-- Path Follower Node. -->
	<node name="simple_follower3" pkg="path_follower" type="simple_follower" args="3 1.0">
	     <remap from="/path_follower_3/way_point_callback" to="/prueba_test/out_waypoint_3" />	
	</node>
</launch>

